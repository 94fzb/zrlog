"use strict";(self.webpackChunkadmin_web_frontend=self.webpackChunkadmin_web_frontend||[]).push([[884],{8894:function(n,e,t){var i=t(9439),a=t(8391),s=t(8773),r=t(3712),o=function(n){localStorage.setItem("lastOpenedPage",n)},l=function(n){return n.search.length<=0?n.pathname:n.pathname+n.search};e.Z=function(n){var e=n.children,t=(0,s.TH)(),c=(0,s.s0)(),m="true"===sessionStorage.getItem("loaded"),u=(0,a.useState)(m),d=(0,i.Z)(u,2),h=d[0],f=d[1];return(0,a.useEffect)((function(){if(!h){var n=localStorage.getItem("lastOpenedPage");n&&n!==l(t)&&(console.log("Redirecting to last opened page:",n),o(n),c(n),sessionStorage.setItem("loaded","true")),f(!0)}}),[]),(0,a.useEffect)((function(){var n=l(t);if(window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches){if(n.startsWith("/500")||n.startsWith("/404")||n.startsWith("/403")||n.startsWith("/offline"))return;console.log("This page is running as a PWA."),o(n)}}),[t]),h?(0,r.jsx)(r.Fragment,{children:e}):(0,r.jsx)(r.Fragment,{})}},7292:function(n,e,t){t.r(e),t.d(e,{default:function(){return en}});var i=t(9439),a=t(168),s=t(194),r=t(9467),o=t(153),l=t(535),c=t(7489),m=t(3561),u=t(8391),d=t(9551),h=t(3433),f=t(2350),p=t(7814),g=t(9348),x=t(874),b=t(634),y=t(5781),j=t(5536),v=t(5025),Z=t(4581),k=t(1474),w=t(3712),R=o.Z.Text,I=function(n){var e,t=n.data,i=function(n){var e,i=[{key:"1",label:(0,w.jsxs)(j.rU,{to:"/user",children:[(0,w.jsx)(f.Z,{}),(0,w.jsx)(R,{style:{paddingLeft:"5px",paddingRight:16},children:n["admin.user.info"]})]})},{key:"2",label:(0,w.jsxs)(j.rU,{to:"/user-update-password",children:[(0,w.jsx)(p.Z,{}),(0,w.jsx)(R,{style:{paddingLeft:"5px",paddingRight:16},children:n["admin.changePwd"]})]})},{key:"-",label:(0,w.jsx)(k.Z,{style:{marginTop:"5px",marginBottom:"5px",userSelect:"none",cursor:"none"}})},{key:"3",label:(0,w.jsxs)("a",{href:"./admin/logout",children:[(0,w.jsx)(g.Z,{}),(0,w.jsx)(R,{style:{paddingLeft:"5px",paddingRight:16},children:n["admin.user.logout"]})]})}];return null!==(e=t.lastVersion)&&void 0!==e&&e.upgrade&&(i=[{key:"0",label:(0,w.jsx)(j.rU,{to:"/upgrade",children:(0,w.jsxs)(y.Z,{dot:!0,children:[(0,w.jsx)(x.Z,{}),(0,w.jsxs)(R,{style:{paddingLeft:"6px"},children:[n.newVersion," - (",t.lastVersion.version.version,"#",t.lastVersion.version.type,")"]})]})})}].concat((0,h.Z)(i))),i}((0,m.sR)());return(0,w.jsx)(v.Z,{menu:{items:i},placement:"bottom",arrow:{pointAtCenter:!0},children:(0,w.jsxs)("div",{style:{color:"#ffffff",height:"64px",borderRadius:0,marginRight:16,float:"right"},children:[(0,w.jsx)(Z.Z,{preview:!1,fallback:m.ZP.getFillBackImg(),className:"userAvatarImg",src:t.header,style:{cursor:"pointer",width:40,height:40}}),(0,w.jsx)(y.Z,{dot:null===(e=t.lastVersion)||void 0===e?void 0:e.upgrade,children:(0,w.jsx)(R,{style:{color:"#ffffff",paddingLeft:8},children:t.userName})}),(0,w.jsx)(b.Z,{})]})})},S=t(7460),z=t(301),W=t(4901),F=t(6977),T=t(3806),M=t(6389),V=t(6348),_=t(9209),C=t(9987),E=t(5808),H=t(5936),L=t(303),P=t(8833),Q=t(3163),U=t(3670),A=t(8773);var D,N=function(){var n=(0,A.TH)();function e(e,t,i){var a=function(e){return n.pathname.startsWith("/website")&&e.link.startsWith("/website")||n.pathname===e.link?{selected:!0,icon:e.selectIcon}:"#more"!==e.link?{selected:!1,icon:e.icon}:"/link"===n.pathname||"/nav"===n.pathname||"/article-type"===n.pathname?{selected:!0,icon:e.selectIcon}:{selected:!1,icon:e.icon}}(e),s=(0,w.jsxs)(j.rU,{to:e.link,style:{color:a.selected&&d.Z.isDarkMode()?(0,m.RQ)():"#FFF"},children:[a.icon,(0,w.jsx)("span",{className:"menu-title",children:e.text})]}),r={margin:0,borderRadius:0,width:"100%",color:"#FFF"};return a.selected&&(r.background=function(n,e){if(n.startsWith("#")){var t,i=n.slice(1);if(3===i.length)t=65793*parseInt(i,16);else{if(6!==i.length)throw new Error("Invalid hexadecimal color format");t=parseInt(i,16)}var a=t>>8&255,s=255&t;return"rgba(".concat(t>>16&255,", ").concat(a,", ").concat(s,", ").concat(e,")")}if(n.startsWith("rgba("))return n.replace(/[^,]+(?=\))/,e.toString());if(n.startsWith("rgb("))return"rgba(".concat(n.slice(n.indexOf("(")+1,n.lastIndexOf(",")),", ").concat(e,")");throw new Error("Unsupported color format")}((0,m.RQ)(),.3)),i.length>0?{key:t,children:i,label:s,style:r}:{key:t,label:s,style:r}}var t=[e({text:(0,m.sR)().dashboard,link:"/index",selectIcon:(0,w.jsx)(z.Z,{style:{fontSize:24}}),icon:(0,w.jsx)(W.Z,{style:{fontSize:24}})},"/index",[]),e({text:(0,m.sR)()["admin.log.edit"],link:"/article-edit",selectIcon:(0,w.jsx)(F.Z,{style:{fontSize:24}}),icon:(0,w.jsx)(T.Z,{style:{fontSize:24}})},"/article-edit",[]),e({text:(0,m.sR)().blogManage,link:"/article",selectIcon:(0,w.jsx)(M.Z,{style:{fontSize:24}}),icon:(0,w.jsx)(V.Z,{style:{fontSize:24}})},"/article",[]),e({text:(0,m.sR)()["admin.comment.manage"],link:"/comment",selectIcon:(0,w.jsx)(_.Z,{style:{fontSize:24}}),icon:(0,w.jsx)(_.Z,{style:{fontSize:24}})},"/comment",[]),e({text:(0,m.sR)()["admin.plugin.manage"],link:"/plugin",selectIcon:(0,w.jsx)(C.Z,{style:{fontSize:24}}),icon:(0,w.jsx)(E.Z,{style:{fontSize:24}})},"/plugin",[]),e({text:(0,m.sR)()["admin.setting"],link:"/website",selectIcon:(0,w.jsx)(H.Z,{style:{fontSize:24}}),icon:(0,w.jsx)(L.Z,{style:{fontSize:24}})},"/website",[]),e({text:(0,m.sR)()["admin.more"],link:"#more",selectIcon:(0,w.jsx)(P.Z,{style:{fontSize:24}}),icon:(0,w.jsx)(Q.Z,{style:{fontSize:24}})},"/more",[e({text:(0,m.sR)()["admin.type.manage"],link:"/article-type",selectIcon:(0,w.jsx)("span",{}),icon:(0,w.jsx)("span",{})},"/article-type",[]),e({text:(0,m.sR)()["admin.link.manage"],link:"/link",selectIcon:(0,w.jsx)("span",{}),icon:(0,w.jsx)("span",{})},"/link",[]),e({text:(0,m.sR)()["admin.nav.manage"],link:"/nav",selectIcon:(0,w.jsx)("span",{}),icon:(0,w.jsx)("span",{})},"/nav",[])])],a=function(){return""===n.pathname?"/index":n.pathname.startsWith("/website")?"/website":"/link"===n.pathname||"/nav"===n.pathname||"/article-type"===n.pathname?"/more":n.pathname},s=a(),r=(0,u.useState)(s),o=(0,i.Z)(r,2),l=o[0],c=o[1];return(0,u.useEffect)((function(){c(a())}),[n]),(0,w.jsx)(U.Z,{selectedKeys:[l],items:t,theme:d.Z.isDarkMode()?"light":"dark"})},O=t(4671),q=t(6146),B=t(6422),K=t(8894),G=r.Z.Header,J=r.Z.Content,X=r.Z.Footer,Y=r.Z.Sider,$=o.Z.Text,nn=(0,S.ZP)("div")(D||(D=(0,a.Z)(["\n    .ant-menu-item {\n        width: 100%;\n    }\n\n    #logo {\n        height: 64px;\n        padding-left: 23px;\n        padding-right: 23px;\n        overflow: hidden;\n        font-size: 25px;\n        display: inline-flex;\n        color: #ffffff;\n    }\n\n    .ant-layout-content {\n        padding-left: 12px;\n        padding-right: 12px;\n    }\n\n    .ant-layout-footer {\n        padding: 20px;\n    }\n\n    .ant-layout-footer-copyright {\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n\n    .ant-layout-header {\n        padding: 0;\n    }\n\n    li.ant-menu-item > a {\n        color: #ffffff;\n    }\n\n    .ant-menu-inline,\n    .ant-menu-vertical,\n    .ant-menu-vertical-left {\n        border: 0;\n    }\n\n    li.ant-menu-item-active > a:hover {\n        color: #ffffff;\n    }\n\n    .ant-menu-item .anticon,\n    .ant-menu-submenu-title .anticon {\n        margin-top: 12px;\n        display: block;\n        font-size: 25px;\n        margin-right: 0;\n    }\n\n    .ant-menu-item > a > span,\n    .ant-menu-submenu-title > span {\n        display: block;\n        font-size: 12px;\n        margin-right: 0;\n        text-align: center !important;\n    }\n\n    .ant-menu-vertical > .ant-menu-item,\n    .ant-menu-vertical-left > .ant-menu-item,\n    .ant-menu-vertical-right > .ant-menu-item,\n    .ant-menu-inline > .ant-menu-item,\n    .ant-menu-vertical > .ant-menu-submenu > .ant-menu-submenu-title,\n    .ant-menu-vertical-left > .ant-menu-submenu > .ant-menu-submenu-title,\n    .ant-menu-vertical-right > .ant-menu-submenu > .ant-menu-submenu-title,\n    .ant-menu-inline > .ant-menu-submenu > .ant-menu-submenu-title {\n        height: 72px;\n        padding: 0;\n    }\n\n    .ant-menu-sub > .ant-menu-item {\n        font-size: 14px;\n        height: 40px;\n    }\n\n    .ant-menu-submenu {\n        height: 72px;\n    }\n\n    .ant-menu-submenu-title > i {\n        display: none;\n    }\n\n    .ant-menu-submenu-title {\n        margin: 0;\n    }\n\n    .ant-menu-submenu-title:hover {\n        color: #ffffff;\n    }\n\n    h3.page-header {\n        margin-top: 20px;\n        border-left: 3px solid ",";\n        padding-left: 5px;\n        font-size: 1.75rem;\n    }\n\n    .userAvatarImg {\n        width: 40px;\n        height: 40px;\n        border-radius: 50%;\n    }\n\n    .ant-menu-vertical .ant-menu-item:not(:last-child),\n    .ant-menu-vertical-left .ant-menu-item:not(:last-child),\n    .ant-menu-vertical-right .ant-menu-item:not(:last-child),\n    .ant-menu-inline .ant-menu-item:not(:last-child) {\n        margin-bottom: 0;\n    }\n\n    .ant-menu-vertical .ant-menu-item,\n    .ant-menu-vertical-left .ant-menu-item,\n    .ant-menu-vertical-right .ant-menu-item,\n    .ant-menu-inline .ant-menu-item,\n    .ant-menu-vertical .ant-menu-submenu-title,\n    .ant-menu-vertical-left .ant-menu-submenu-title,\n    .ant-menu-vertical-right .ant-menu-submenu-title,\n    .ant-menu-inline .ant-menu-submenu-title {\n        margin: 0;\n    }\n\n    .ant-upload-list {\n        display: none;\n    }\n\n    .ant-menu-submenu-title {\n        margin: 0;\n        color: white;\n        border-radius: 0;\n        width: 100%;\n    }\n\n    ul {\n        margin-bottom: 0;\n    }\n\n    .ant-menu-item .anticon,\n    .ant-menu-submenu-title .anticon {\n        font-size: 24px;\n    }\n\n    .ant-typography h3,\n    h3.ant-typography {\n        margin-bottom: 0.5em;\n        font-weight: 600;\n        font-size: 24px;\n        line-height: 1.35;\n    }\n\n    .ant-typography h4,\n    h4.ant-typography {\n        margin-bottom: 0.5em;\n        font-weight: 600;\n        font-size: 20px;\n        line-height: 1.4;\n    }\n\n    .ant-menu {\n        text-align: center;\n        box-shadow: none;\n    }\n\n    .ant-menu .menu-title {\n        margin-left: 0 !important;\n        font-size: 12px;\n    }\n\n    .ant-form-item-explain-error {\n        color: #ff4d4f;\n    }\n\n    .ant-form-item-has-error .ant-radio-group {\n        border: 1px solid #ff4d4f;\n        border-radius: 6px;\n    }\n\n    .ant-upload {\n        padding: 0 !important;\n        box-sizing: content-box;\n    }\n\n    .ant-input-search-button {\n        background-color: "," !important;\n    }\n\n    .ant-input-search-button:hover {\n        background-color: "," !important;\n    }\n\n    .ant-input-search-button:active {\n        background-color: "," !important;\n    }\n"])),(0,m.RQ)(),(0,m.RQ)(),(0,m.RQ)(),(0,m.RQ)()),en=function(n){var e=n.children,t=n.loading,a=(0,u.useState)(null===O.qj||void 0===O.qj?void 0:O.qj.user),o=(0,i.Z)(a,2),h=o[0],f=o[1];return(0,u.useEffect)((function(){void 0===h&&q.Z.get("/api/admin/user").then((function(n){var e=n.data;f(e.data)}))}),[]),(0,w.jsx)(K.Z,{children:(0,w.jsxs)(nn,{children:[(0,w.jsxs)(G,{style:{backgroundColor:d.Z.isDarkMode()?"#1f1f1f":"#011529"},children:[(0,w.jsx)("a",{href:(0,m.sR)().homeUrl+"?spm=admin&buildId="+(0,m.sR)().buildId,id:"logo",target:"_blank",title:(0,m.sR)().websiteTitle,rel:"noopener noreferrer",children:(0,w.jsx)(s.Z,{})}),h&&(0,w.jsx)(I,{data:h})]}),(0,w.jsxs)(l.Z,{children:[(0,w.jsx)(Y,{width:70,style:{minHeight:"100vh",backgroundColor:d.Z.isDarkMode()?"#1f1f1f":"#001529"},children:(0,w.jsx)(N,{})}),(0,w.jsx)(c.Z,{style:{flex:1,width:100},children:(0,w.jsxs)(r.Z,{style:{minHeight:"100vh"},children:[(0,w.jsxs)(J,{children:[t&&(0,w.jsx)(B.Z,{}),e]}),(0,w.jsx)(X,{children:(0,w.jsxs)(l.Z,{children:[(0,w.jsx)(c.Z,{xs:24,md:12,children:(0,w.jsx)("div",{className:"ant-layout-footer-copyright",dangerouslySetInnerHTML:{__html:(0,m.sR)().copyrightTips+". All Rights Reserved."}})}),(0,w.jsx)(c.Z,{xs:0,md:12,children:(0,w.jsxs)($,{style:{float:"right"},children:["Version ",(0,m.sR)().currentVersion]})})]})})]})})]})]})})}}}]);