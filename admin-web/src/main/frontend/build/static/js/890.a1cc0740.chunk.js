"use strict";(self.webpackChunkadmin_web_frontend=self.webpackChunkadmin_web_frontend||[]).push([[890],{1890:function(e,a,t){t.r(a);var n=t(5861),r=t(1413),i=t(9439),s=t(7757),l=t.n(s),d=t(8391),p=t(9012),c=t(7372),o=t(2933),u=t(3615),f=t(535),h=t(8881),m=t(1474),x=t(7849),Z=t(4581),g=t(5897),y=t(517),j=t(5068),v=t(6146),b=t(3561),M=t(4384),w=t(3712),k={labelCol:{span:8},wrapperCol:{span:16}},C=function(e){for(var a={},t=0,n=Object.entries(e.config);t<n.length;t++){var r=(0,i.Z)(n[t],2),s=r[0],l=r[1];a[s]=l.value}return a};a.default=function(e){var a=e.data,t=e.offline,s=C(a),E=(0,d.useState)({config:a.config,dataMap:s}),T=(0,i.Z)(E,2),F=T[0],_=T[1],R=p.Z.useApp().message,I=function(e,a){return"file"===a.type?(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(g.Z,{style:{width:"128px",height:"128px"},multiple:!1,onChange:function(a){return function(e,a){var t=e.file.status;"done"===t?(F.dataMap[a]=e.file.response.data.url,_((0,r.Z)((0,r.Z)({},F),{},{dataMap:F.dataMap}))):"error"===t&&R.error("".concat(e.file.name," file upload failed."))}(a,e)},name:"imgFile",action:"/api/admin/upload?dir=image",children:(0,w.jsx)(Z.Z,{style:{borderRadius:8},preview:!1,height:128,width:128,src:F.dataMap[e]})})}):"switch"===a.htmlElementType?(0,w.jsx)(M.Z,{size:"small"}):"textarea"===a.htmlElementType||"large-textarea"===a.htmlElementType?(0,w.jsx)(y.Z,{rows:"large-textarea"===a.htmlElementType?20:5,placeholder:a.placeholder}):"hidden"===a.type?(0,w.jsx)(c.Z,{hidden:!0}):"colorPicker"===a.htmlElementType?(0,w.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[(0,w.jsx)(o.Z,{value:F.dataMap[e],onChange:function(a){F.dataMap[e]=a.toHexString(),_((0,r.Z)((0,r.Z)({},F),{},{dataMap:F.dataMap}))}}),(0,w.jsx)("span",{style:{paddingLeft:8},children:F.dataMap[e]})]}):(0,w.jsx)(c.Z,{type:a.type,placeholder:a.placeholder})};return(0,d.useEffect)((function(){_({config:a.config,dataMap:C(a)})}),[a]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(h.Z,{className:"page-header",level:3,children:(0,b.sR)().templateConfig}),(0,w.jsx)(m.Z,{}),(0,w.jsx)(f.Z,{children:(0,w.jsx)(j.Z,{xs:24,style:{maxWidth:600},children:(0,w.jsxs)(u.Z,(0,r.Z)((0,r.Z)({onFinish:function(){v.Z.post("/api/admin/template/config",F.dataMap).then(function(){var e=(0,n.Z)(l().mark((function e(a){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=a.data).error){e.next=6;break}return e.next=4,R.error(t.message);case 4:e.next=9;break;case 6:if(0!==t.error){e.next=9;break}return e.next=9,R.success(t.message);case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())},initialValues:F.dataMap,onValuesChange:function(e,a){return t=a,void _((0,r.Z)((0,r.Z)({},F),{},{dataMap:t}));var t}},k),{},{children:[function(){for(var e=[],a=0,t=Object.entries(F.config);a<t.length;a++){var n=(0,i.Z)(t[a],2),r=n[0],s=n[1],l=(0,w.jsx)(u.Z.Item,{label:s.label,name:r,style:{display:"hidden"===s.type?"none":""},children:I(r,s)},r);e.push(l)}return e}(),(0,w.jsx)(m.Z,{}),(0,w.jsx)(x.ZP,{disabled:t,type:"primary",htmlType:"submit",children:(0,b.sR)().submit})]}))})})]})}}}]);