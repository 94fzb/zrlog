"use strict";(self.webpackChunkadmin_web_frontend=self.webpackChunkadmin_web_frontend||[]).push([[740],{7740:function(e,n,a){a.r(n),a.d(n,{default:function(){return E}});var t=a(1048),s=a(8881),r=a(8288),i=a(5068),l=a(1474),d=a(9439),c=a(5781),o=a(433),m=a(7931),u=a(303),h=a(5691),p=a(6155),x=a(4105),Z=a(3047),j=a(7849),g=a(8391),f=a(3561),b=a(6146),v=a(5536),y=a(3712),w=function(e){var n=e.data,a=(0,g.useState)(n),t=(0,d.Z)(a,2),w=t[0],k=t[1],C=function(){b.Z.get("/api/admin/template").then((function(e){var n=e.data;k(n.data)}))},R=function(e){var n=[];return n.push((0,y.jsx)("div",{onClick:function(){return function(e){b.Z.post("/api/admin/template/preview?template="+e).then((function(){window.open(document.baseURI,"_blank"),C()}))}(e.template)},children:(0,y.jsx)(m.Z,{},"preview")}),(0,y.jsx)(v.rU,{to:"/template-config?template="+e.template,children:(0,y.jsx)(u.Z,{},"setting")}),(0,y.jsx)("div",{onClick:function(){return function(e){b.Z.post("/api/admin/template/apply?template="+e).then((function(){C()}))}(e.template)},children:(0,y.jsx)(h.Z,{})})),e.deleteAble&&n.push((0,y.jsx)("div",{onClick:function(){return function(e){b.Z.post("/api/admin/template/delete?template="+e).then((function(){C()}))}(e.template)},children:(0,y.jsx)(p.Z,{},"delete")})),n};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.Z,{level:4,children:(0,f.sR)()["admin.template.manage"]}),(0,y.jsx)(l.Z,{}),(0,y.jsx)(r.Z,{gutter:[16,16],children:w.map((function(e){return(0,y.jsx)(i.Z,{md:6,xxl:4,xs:24,children:(0,y.jsx)(c.Z.Ribbon,{text:e.use?(0,f.sR)()["admin.theme.inUse"]:e.preview?(0,f.sR)()["admin.theme.inPreview"]:"",style:{fontSize:16,display:e.use||e.preview?"":"none"},children:(0,y.jsx)(o.Z,{cover:(0,y.jsx)("img",{style:{width:"100%",minHeight:250},alt:e.name,title:e.name,src:e.adminPreviewImage}),actions:R(e),children:(0,y.jsx)(Z.Z,{title:e.name,description:e.digest})})})})}))}),(0,y.jsx)(l.Z,{}),(0,y.jsx)(v.rU,{to:"/template-center",children:(0,y.jsx)(j.ZP,{icon:(0,y.jsx)(x.Z,{}),type:"primary",children:(0,f.sR)()["admin.theme.download"]})})]})},k=a(1413),C=a(2805),R=a(7372),_=a(738),I=a(9012),P={labelCol:{span:8},wrapperCol:{span:16}},F=function(e){var n=e.data,a=(0,g.useState)(n),t=(0,d.Z)(a,2),r=t[0],i=t[1],c=I.Z.useApp().message;return void 0===r?(0,y.jsx)(y.Fragment,{}):(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(C.Z,(0,k.Z)((0,k.Z)({},P),{},{initialValues:r,onValuesChange:function(e,n){return i((0,k.Z)((0,k.Z)({},r),n))},onFinish:function(e){return n=e,void b.Z.post("/api/admin/website/blog",(0,k.Z)((0,k.Z)({},r),n)).then((function(e){var n=e.data;n.error?c.error(n.message).then():c.success(n.message).then((function(){(0,f.YB)(),window.location.reload()}))}));var n},children:[(0,y.jsx)(s.Z,{level:4,children:"\u535a\u5ba2\u8bbe\u7f6e"}),(0,y.jsx)(l.Z,{}),(0,y.jsx)(C.Z.Item,{name:"host",label:"\u535a\u5ba2\u57df\u540d\uff08Host\uff09",children:(0,y.jsx)(R.Z,{style:{maxWidth:"300px"},placeholder:"\u7559\u7a7a\uff0c\u7a0b\u5e8f\u5c06\u8bfb\u53d6\u63a5\u6536\u5230\u7684 Host \u5b57\u6bb5"})}),(0,y.jsx)(C.Z.Item,{valuePropName:"checked",name:"generator_html_status",label:"\u9759\u6001\u5316\u6587\u7ae0\u9875",children:(0,y.jsx)(_.Z,{size:"small"})}),(0,y.jsx)(C.Z.Item,{valuePropName:"checked",name:"disable_comment_status",label:"\u5173\u95ed\u8bc4\u8bba",children:(0,y.jsx)(_.Z,{size:"small"})}),(0,y.jsx)(C.Z.Item,{valuePropName:"checked",name:"article_thumbnail_status",label:"\u6587\u7ae0\u5c01\u9762",children:(0,y.jsx)(_.Z,{size:"small"})}),(0,y.jsx)(l.Z,{}),(0,y.jsx)(j.ZP,{type:"primary",htmlType:"submit",children:(0,f.sR)().submit})]}))})},V=a(2503),S={labelCol:{span:8},wrapperCol:{span:16}},U=function(e){var n=e.data,a=(0,g.useState)(n),t=(0,d.Z)(a,2),r=t[0],i=t[1],c=I.Z.useApp().message;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.Z,{level:4,children:"\u8ba4\u771f\u8f93\u5165\uff0c\u6709\u52a9\u4e8e\u7f51\u7ad9\u88ab\u6536\u5f55"}),(0,y.jsx)(l.Z,{}),(0,y.jsxs)(C.Z,(0,k.Z)((0,k.Z)({},S),{},{initialValues:r,onValuesChange:function(e,n){return i((0,k.Z)((0,k.Z)({},r),n))},onFinish:function(e){return n=e,void b.Z.post("/api/admin/website/basic",(0,k.Z)((0,k.Z)({},r),n)).then((function(e){var n=e.data;n.error?c.error(n.message).then():c.success(n.message).then((function(){(0,f.YB)(),window.location.reload()}))}));var n},children:[(0,y.jsx)(C.Z.Item,{name:"title",label:"\u7f51\u7ad9\u6807\u9898",rules:[{required:!0}],children:(0,y.jsx)(R.Z,{placeholder:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u6807\u9898"})}),(0,y.jsx)(C.Z.Item,{name:"second_title",label:"\u7f51\u7ad9\u526f\u6807\u9898",children:(0,y.jsx)(R.Z,{placeholder:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u526f\u6807\u9898"})}),(0,y.jsx)(C.Z.Item,{name:"keywords",label:"\u7f51\u7ad9\u5173\u952e\u8bcd",children:(0,y.jsx)(R.Z,{placeholder:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u5173\u952e\u8bcd"})}),(0,y.jsx)(C.Z.Item,{name:"description",label:"\u7f51\u7ad9\u63cf\u8ff0",children:(0,y.jsx)(V.Z,{rows:5})}),(0,y.jsx)(l.Z,{}),(0,y.jsx)(j.ZP,{type:"primary",htmlType:"submit",children:(0,f.sR)().submit})]}))]})},N={labelCol:{span:8},wrapperCol:{span:16}},z=function(e){var n=e.data,a=(0,g.useState)(n),t=(0,d.Z)(a,2),r=t[0],i=t[1],c=I.Z.useApp().message;return void 0===r?(0,y.jsx)(y.Fragment,{}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.Z,{level:4,children:"ICP\uff0c\u7f51\u7ad9\u7edf\u8ba1\u7b49\u4fe1\u606f"}),(0,y.jsx)(l.Z,{}),(0,y.jsxs)(C.Z,(0,k.Z)((0,k.Z)({},N),{},{initialValues:r,onValuesChange:function(e,n){return i((0,k.Z)((0,k.Z)({},r),n))},onFinish:function(e){return n=e,void b.Z.post("/api/admin/website/other",(0,k.Z)((0,k.Z)({},r),n)).then((function(e){var n=e.data;n.error?c.error(n.message).then():c.success(n.message).then((function(){}))}));var n},children:[(0,y.jsx)(C.Z.Item,{name:"icp",label:"ICP\u5907\u6848\u4fe1\u606f",children:(0,y.jsx)(V.Z,{})}),(0,y.jsx)(C.Z.Item,{name:"webCm",label:"\u7f51\u7ad9\u7edf\u8ba1",children:(0,y.jsx)(V.Z,{rows:7})}),(0,y.jsx)(l.Z,{}),(0,y.jsx)(j.ZP,{type:"primary",htmlType:"submit",children:(0,f.sR)().submit})]}))]})},T=a(5861),A=a(7757),O=a.n(A),W=a(7507),H=a(8773),L={labelCol:{span:8},wrapperCol:{span:16}},B=function(e){var n=e.data,a=(0,g.useState)(!1),t=(0,d.Z)(a,2),s=t[0],c=t[1],o=I.Z.useApp(),m=o.modal,u=o.message,h=(0,g.useState)(n),p=(0,d.Z)(h,2),x=p[0],Z=p[1],v=(0,H.s0)(),w=function(){var e=(0,T.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return c(!0),e.prev=3,e.next=6,b.Z.get("/api/admin/upgrade").then(function(){var e=(0,T.Z)(O().mark((function e(n){var a,t;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=n.data).data.upgrade?(t="".concat((0,f.sR)().newVersion," - #").concat(a.data.version.type),m.info({title:t,content:(0,y.jsx)("div",{dangerouslySetInnerHTML:{__html:a.data.version.changeLog}}),closable:!0,okText:(0,f.sR)().doUpgrade,onOk:function(){v("/upgrade")}})):u.info((0,f.sR)().notFoundNewVersion);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 6:return e.prev=6,c(!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[3,,6,9]])})));return function(){return e.apply(this,arguments)}}();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.Z,{children:(0,y.jsx)(i.Z,{md:12,xs:24,children:(0,y.jsx)(j.ZP,{type:"dashed",loading:s,onClick:w,style:{float:"right"},children:(0,f.sR)().checkUpgrade})})}),(0,y.jsx)(r.Z,{children:(0,y.jsx)(i.Z,{md:12,xs:24,children:(0,y.jsxs)(C.Z,(0,k.Z)((0,k.Z)({},L),{},{initialValues:x,onValuesChange:function(e,n){return Z((0,k.Z)((0,k.Z)({},x),n))},onFinish:function(e){return n=e,void b.Z.post("/api/admin/website/upgrade",(0,k.Z)((0,k.Z)({},x),n)).then((function(e){var n=e.data;n.error?u.error(n.message).then():u.success(n.message).then((function(){}))}));var n},children:[(0,y.jsx)(C.Z.Item,{name:"autoUpgradeVersion",label:(0,f.sR)()["admin.upgrade.autoCheckCycle"],children:(0,y.jsxs)(W.Z,{style:{maxWidth:"120px"},children:[(0,y.jsx)(W.Z.Option,{value:86400,children:(0,f.sR)()["admin.upgrade.cycle.oneDay"]},"86400"),(0,y.jsx)(W.Z.Option,{value:604800,children:(0,f.sR)()["admin.upgrade.cycle.oneWeek"]},"604800"),(0,y.jsx)(W.Z.Option,{value:1296e3,children:(0,f.sR)()["admin.upgrade.cycle.halfMonth"]},"1296000"),(0,y.jsx)(W.Z.Option,{value:-1,children:(0,f.sR)()["admin.upgrade.cycle.never"]},"-1")]})}),(0,y.jsx)(C.Z.Item,{valuePropName:"checked",name:"upgradePreview",label:(0,f.sR)()["admin.upgrade.canPreview"],children:(0,y.jsx)(_.Z,{size:"small"})}),(0,y.jsx)(l.Z,{}),(0,y.jsx)(j.ZP,{type:"primary",htmlType:"submit",children:(0,f.sR)().submit})]}))})})]})},M=a(9362),Y={labelCol:{span:8},wrapperCol:{span:16}},q=W.Z.Option,D=function(e){var n=e.data,a=(0,g.useState)(n),t=(0,d.Z)(a,2),r=t[0],i=t[1],c=I.Z.useApp().message;return void 0===r?(0,y.jsx)(y.Fragment,{}):(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(C.Z,(0,k.Z)((0,k.Z)({},Y),{},{initialValues:r,onValuesChange:function(e,n){return i((0,k.Z)((0,k.Z)({},r),n))},onFinish:function(e){return n=e,void b.Z.post("/api/admin/website/admin",(0,k.Z)((0,k.Z)({},r),n)).then((function(e){var n=e.data;n.error?c.error(n.message).then():c.success(n.message).then((function(){(0,f.YB)(),window.location.reload()}))}));var n},children:[(0,y.jsx)(s.Z,{level:4,children:"\u7ba1\u7406\u754c\u9762\u8bbe\u7f6e"}),(0,y.jsx)(l.Z,{}),(0,y.jsx)(C.Z.Item,{name:"session_timeout",label:"\u7ba1\u7406\u754c\u9762\u4f1a\u8bdd\u8d85\u65f6",rules:[{required:!0}],children:(0,y.jsx)(R.Z,{suffix:"\u5206\u949f",style:{maxWidth:"120px"},max:99999,type:"number",min:5,placeholder:""})}),(0,y.jsx)(C.Z.Item,{name:"language",label:(0,f.sR)().language,children:(0,y.jsxs)(W.Z,{style:{maxWidth:"100px"},children:[(0,y.jsx)(q,{value:"zh_CN",children:(0,f.sR)().languageChinese}),(0,y.jsx)(q,{value:"en_US",children:(0,f.sR)().languageEnglish})]})}),(0,y.jsx)(C.Z.Item,{valuePropName:"checked",name:"admin_darkMode",label:"\u62a4\u773c\u6a21\u5f0f",children:(0,y.jsx)(_.Z,{size:"small"})}),(0,y.jsx)(C.Z.Item,{label:"\u4e3b\u9898",children:(0,y.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[(0,y.jsx)(M.Z,{value:r.admin_color_primary,onChange:function(e){i((0,k.Z)((0,k.Z)({},r),{},{admin_color_primary:e.toHexString()}))}}),(0,y.jsx)("span",{style:{paddingLeft:8},children:r.admin_color_primary})]})}),(0,y.jsx)(s.Z,{level:4,children:"\u6587\u7ae0/\u7f16\u8f91\u5668\u8bbe\u7f6e"}),(0,y.jsx)(l.Z,{}),(0,y.jsx)(C.Z.Item,{name:"article_auto_digest_length",label:"\u6587\u7ae0\u81ea\u52a8\u6458\u8981\u6700\u5927\u957f\u5ea6",children:(0,y.jsx)(R.Z,{suffix:"\u5b57",style:{maxWidth:"120px"},max:99999,type:"number",min:-1,placeholder:""})}),(0,y.jsx)(l.Z,{}),(0,y.jsx)(j.ZP,{type:"primary",htmlType:"submit",children:(0,f.sR)().submit})]}))})},E=function(e){var n=e.data,a=new URLSearchParams(window.location.search).get("tab"),d=a||"basic",c=function(e,n){var a="basic"===e?"/website":"/website?tab="+e;return(0,y.jsx)(v.rU,{to:a,replace:!0,style:{color:d===e?(0,f.RQ)():"inherit"},children:n})};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.Z,{className:"page-header",level:3,children:(0,f.sR)()["admin.setting"]}),(0,y.jsx)(l.Z,{}),(0,y.jsx)(t.Z,{activeKey:d,items:[{key:"basic",label:c("basic","\u57fa\u672c\u4fe1\u606f"),children:(0,y.jsx)(r.Z,{children:(0,y.jsx)(i.Z,{md:12,xs:24,children:(0,y.jsx)(U,{data:n.basic})})})},{key:"blog",label:c("blog","\u535a\u5ba2\u8bbe\u7f6e"),children:(0,y.jsx)(r.Z,{children:(0,y.jsx)(i.Z,{md:12,xs:24,children:(0,y.jsx)(F,{data:n.blog})})})},{key:"admin",label:c("admin","\u7ba1\u7406\u8bbe\u7f6e"),children:(0,y.jsx)(r.Z,{children:(0,y.jsx)(i.Z,{md:12,xs:24,children:(0,y.jsx)(D,{data:n.admin})})})},{key:"template",label:c("template",(0,f.sR)()["admin.template.manage"]),children:(0,y.jsx)(w,{data:n.templates})},{key:"other",label:c("other","\u5176\u4ed6\u8bbe\u7f6e"),children:(0,y.jsx)(r.Z,{children:(0,y.jsx)(i.Z,{md:12,xs:24,children:(0,y.jsx)(z,{data:n.other})})})},{key:"upgrade",label:c("upgrade",(0,f.sR)()["admin.upgrade.manage"]),children:(0,y.jsx)(B,{data:n.upgrade})}]})]})}}}]);